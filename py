def calculate_voltage_drop():
    print("\n=== NetPing ===")
    try:
        # Выбор материала кабеля
        material = input("Выберите материал кабеля (медь/алюминий). Пример: медь: ").strip().lower()
        if material == "медь":
            rho = 0.01724  # Ом·мм²/м
            alpha = 0.00393  # Температурный коэффициент для меди (1/°C)
        elif material == "алюминий":
            rho = 0.02826  # Ом·мм²/м
            alpha = 0.00403  # Температурный коэффициент для алюминия (1/°C)
        else:
            print("Ошибка: материал кабеля может быть только 'медь' или 'алюминий'.")
            return

        # Ввод данных
        S = float(input("Введите сечение кабеля, мм². Пример: 2.50: "))
        L = float(input("Введите длину кабеля, м. Пример: 30.50: "))
        I = float(input("Введите силу тока, А. Пример: 10.25: "))
        U_source = float(input("Введите напряжение источника питания (постоянное, В). Пример: 220.00: "))
        T = float(input("Введите температуру кабеля, °C. Пример: 25.00 (от -100 до +100): "))

        # Проверка диапазона температуры
        if T < -100 or T > 100:
            print("Ошибка: температура кабеля должна быть в диапазоне от -100 до +100°C.")
            return

        # Расчет сопротивления и падения напряжения
        R = rho / S * (1 + alpha * (T - 20))  # Учет температурного коэффициента
        R_total = 2 * R * L  # Учитываем две жилы (туда и обратно)
        delta_U = I * R_total
        U_remain = U_source - delta_U

        # Вывод формул и результатов
        print("\nФормула для расчета падения напряжения:")
        print("ΔU = 2 × I × (ρ / S) × L × (1 + α × (T - 20))")
        print(f"\nГде:\n  ρ = {rho:.5f} Ом·мм²/м (удельное сопротивление для {material}),\n  S = {S:.2f} мм² (сечение кабеля),\n  L = {L:.2f} м (длина кабеля),\n  I = {I:.2f} А (сила тока),\n  U_source = {U_source:.2f} В (постоянное напряжение источника),\n  T = {T:.2f}°C (температура кабеля).\n")
        print(f"\nРезультаты расчета:")
        print(f"- Сопротивление кабеля на метр: {R:.6f} Ом")
        print(f"- Общее сопротивление кабеля: {R_total:.6f} Ом")
        print(f"- Падение напряжения: {delta_U:.3f} В")
        print(f"- Остаточное напряжение на конце кабеля: {U_remain:.3f} В\n")
    except ValueError:
        print("Ошибка ввода данных. Пожалуйста, введите числа.")

def calculate_max_length():
    print("\n=== NetPing ===")
    try:
        # Выбор материала кабеля
        material = input("Выберите материал кабеля (медь/алюминий). Пример: медь: ").strip().lower()
        if material == "медь":
            rho = 0.01724  # Ом·мм²/м
            alpha = 0.00393  # Температурный коэффициент для меди (1/°C)
        elif material == "алюминий":
            rho = 0.02826  # Ом·мм²/м
            alpha = 0.00403  # Температурный коэффициент для алюминия (1/°C)
        else:
            print("Ошибка: материал кабеля может быть только 'медь' или 'алюминий'.")
            return

        # Ввод данных
        S = float(input("Введите сечение кабеля, мм². Пример: 2.50: "))
        I = float(input("Введите силу тока, А. Пример: 10.25: "))
        U_source = float(input("Введите напряжение источника питания (постоянное, В). Пример: 220.00: "))
        U_min = float(input("Введите минимально допустимое напряжение на конце линии, В. Пример: 200.00: "))
        T = float(input("Введите температуру кабеля, °C. Пример: 25.00 (от -100 до +100): "))

        # Проверка входных данных
        if U_source <= U_min:
            print("Ошибка: напряжение источника должно быть больше минимального напряжения.")
            return
        if T < -100 or T > 100:
            print("Ошибка: температура кабеля должна быть в диапазоне от -100 до +100°C.")
            return

        # Расчет максимальной длины
        delta_U = U_source - U_min
        L = (S * delta_U) / (2 * I * rho * (1 + alpha * (T - 20)))  # Учет температурного коэффициента

        # Вывод формул и результатов
        print("\nФормула для расчета максимальной длины кабеля:")
        print("L = (S × (U_source - U_min)) / (2 × I × ρ × (1 + α × (T - 20)))")
        print(f"\nГде:\n  ρ = {rho:.5f} Ом·мм²/м (удельное сопротивление для {material}),\n  S = {S:.2f} мм² (сечение кабеля),\n  U_source = {U_source:.2f} В (постоянное напряжение источника),\n  U_min = {U_min:.2f} В (минимально допустимое напряжение),\n  I = {I:.2f} А (сила тока),\n  T = {T:.2f}°C (температура кабеля).\n")
        print(f"\nРезультаты расчета:")
        print(f"- Разница напряжений (U_source - U_min): {delta_U:.3f} В")
        print(f"- Максимальная длина кабеля: {L:.3f} м\n")
    except ValueError:
        print("Ошибка ввода данных. Пожалуйста, введите числа.")

def main():
    print("Добро пожаловать в калькулятор NetPing!")
    print("Выберите, что вы хотите рассчитать:\n")
    print("1 - Расчет потерь напряжения")
    print("2 - Расчет максимальной длины кабеля (по минимальному напряжению)")
    print("0 - Выход")

    while True:
        choice = input("\nВаш выбор: ")
        if choice == "1":
            calculate_voltage_drop()
        elif choice == "2":
            calculate_max_length()
        elif choice == "0":
            print("Выход из программы.")
            break
        else:
            print("Неверный выбор, попробуйте снова.")

if __name__ == "__main__":
    main()
